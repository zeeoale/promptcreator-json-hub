<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
 <!-- Primary Meta -->
  <title>TK JSON Hub — Prompt Creator Worlds</title>
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="title" content="TK JSON Hub — Prompt Creator Worlds">
  <meta name="description" content="A public JSON hub for PromptCreatorNode. Curated PFN worlds, cinematic prompts, structured aesthetics and reusable creative systems.">
 
<!-- Open Graph / Facebook / Telegram / WhatsApp -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://json.tikey.art/">
  <meta property="og:title" content="TK JSON Hub — Prompt Creator Worlds">
  <meta property="og:description" content="Curated JSON worlds for PromptCreatorNode. Cinematic aesthetics, PFN systems, reusable creative structures.">
  <meta property="og:image" content="https://json.tikey.art/JSON_HUB_PREVIEW.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="TK JSON Hub">

<!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://json.tikey.art/">
  <meta name="twitter:title" content="TK JSON Hub — Prompt Creator Worlds">
  <meta name="twitter:description" content="Curated JSON worlds for PromptCreatorNode. Cinematic aesthetics, PFN systems, reusable creative structures.">
  <meta name="twitter:image" content="https://json.tikey.art/JSON_HUB_PREVIEW.png">
  <style>
    :root{--bg:#0b0b0d;--card:#111114;--border:rgba(255,255,255,.08);--txt:rgba(231,231,234,.92)}
    body{margin:0;background:var(--bg);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; }
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    h1{font-size:28px;margin:0 0 16px}
    .toolbar{display:flex;gap:12px;flex-wrap:wrap;margin:8px 0 18px}
    input{flex:1;min-width:240px;background:#0f0f12;border:1px solid var(--border);color:var(--txt);padding:10px 12px;border-radius:10px;outline:none}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .thumb{aspect-ratio:4/3;background:#0f0f12;display:flex;align-items:center;justify-content:center}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .body{padding:12px}
    .name{font-weight:700;margin:0 0 6px;font-size:14px}
    .meta{opacity:.78;font-size:12px;margin:0 0 10px;line-height:1.3}
    .logo{max-width:280px;width: 100% }
    .tags{display:flex;flex-wrap:wrap;gap:6px}
    .tag{font-size:11px;color:rgba(231,231,234,.78);border:1px solid var(--border);
      padding:4px 8px;border-radius:999px;background:rgba(0,0,0,.15);
      text-decoration:none;display:inline-flex;align-items:center}
    .tag:hover{border-color:rgba(139,92,246,.35);color:rgba(231,231,234,.95)}
    .small{opacity:.7;font-size:12px}
    .modal{
  display:none;
  position:fixed;
  z-index:9999;
  inset:0;
  background:rgba(0,0,0,.92);
  backdrop-filter: blur(4px);
  align-items:center;
  justify-content:center;
}

.modal-content{
  max-width:90vw;
  max-height:90vh;
  border-radius:14px;
  box-shadow:0 0 60px rgba(0,0,0,.6);
}

.modal-close{
  position:absolute;
  top:24px;
  right:32px;
  font-size:36px;
  color:#fff;
  cursor:pointer;
  opacity:.7;
}
.modal-close:hover{opacity:1}

  </style>
</head>
<body>
  <div class="wrap">
    <img src="JSON_HUB_LOGO.png" class="logo">
    <div class="toolbar">
      <input id="q" placeholder="Cerca per nome, autore, descrizione o tag…">
      <div class="small" id="status"></div>
    </div>
    <div class="grid" id="grid"></div>
  </div>
<!-- Image Modal -->
<div id="imgModal" class="modal">
  <span class="modal-close">&times;</span>
  <img class="modal-content" id="modalImg">
</div>
<script>
  const $ = (id)=>document.getElementById(id);
  const qs = new URLSearchParams(location.search);
  const tagParam = (qs.get("tag")||"").trim().toLowerCase();

  function hasTag(item, t){
    return (item.tags||[]).some(x => (x||"").toLowerCase() === t);
  }

  function matchText(item, q){
    q = q.toLowerCase();
    const hay = [
      item.name, item.author, item.description,
      ...(item.tags||[])
    ].join(" ").toLowerCase();
    return hay.includes(q);
  }

  function render(items){
    const grid = $("grid");
    grid.innerHTML = "";
    items.forEach(it=>{
      const c = document.createElement("div");
      c.className="card";

      const thumb = document.createElement("div");
      thumb.className="thumb";

      if(it.preview){
const img = document.createElement("img");
img.loading = "lazy";
img.src = it.preview;
img.style.cursor = "zoom-in";

img.onclick = () => openModal(it.preview);

thumb.appendChild(img);
      } else {
        thumb.textContent="(no preview)";
      }

      const b = document.createElement("div");
      b.className="body";

      const raw = it.file; // <-- RELATIVO: json/xxx.json

      b.innerHTML = `
        <div class="name">${it.name}</div>
        <div class="meta"><b>Author:</b> ${it.author||"-"}<br>${it.description||""}</div>
        <div class="meta">
          <a class="tag" href="${raw}" target="_blank" rel="noopener">download json</a>
        </div>
      `;

      const tags = document.createElement("div");
      tags.className="tags";
      (it.tags||[]).slice(0,12).forEach(t=>{
        const a = document.createElement("a");
        a.className="tag";
        a.textContent=t;
        a.href=`?tag=${encodeURIComponent(t)}`;
        tags.appendChild(a);
      });

      b.appendChild(tags);
      c.appendChild(thumb);
      c.appendChild(b);
      grid.appendChild(c);
    });
  }


  async function main(){
    const res = await fetch("index.json", {cache:"no-store"}); // index.json in docs/
    const data = await res.json();
    let items = data.items || [];

    if(tagParam){
      items = items.filter(x => hasTag(x, tagParam));
    }

    const qEl = $("q");
    const apply = ()=>{
      const q = (qEl.value||"").trim();
      const out = q ? items.filter(x => matchText(x,q)) : items;
      render(out);
      $("status").textContent =
        `Mostro ${out.length} / ${data.items.length} — ${tagParam ? `tag: ${tagParam}` : "tutti"}`;
    };

    qEl.addEventListener("input", apply);
    apply();
  }
  main();
  const modal = document.getElementById("imgModal");
  const modalImg = document.getElementById("modalImg");
  const closeBtn = document.querySelector(".modal-close");

  function openModal(src){
    modal.style.display = "flex";
    modalImg.src = src;
  }

  closeBtn.onclick = () => modal.style.display = "none";
  modal.onclick = (e) => { if(e.target === modal) modal.style.display = "none"; }

  document.addEventListener("keydown", e=>{
    if(e.key === "Escape") modal.style.display = "none";
  });
</script>

</body>
</html>
